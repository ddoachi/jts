---
# ============================================================================
# SPEC METADATA - This entire frontmatter section contains the spec metadata
# ============================================================================

# === IDENTIFICATION ===
id: afdec700 # Unique identifier (never changes)
title: Initialize Nx Workspace with Base Configuration
type: task
category: infrastructure

# === HIERARCHY ===
parent: "E01-F03"
children: []
epic: "E01"
domain: infrastructure

# === WORKFLOW ===
status: completed
priority: high
assignee: 'Claude'
reviewer: ''

# === TRACKING ===
created: '2025-08-28'
updated: '2025-09-01'
due_date: ''
estimated_hours: 2
actual_hours: 1

# === DEPENDENCIES ===
github_issue:
  number: 61
  link: "https://github.com/ddoachi/jts/issues/61"
  status: "open"
worktree: 'E01-F03-T01'
files:
  - nx.json
  - package.json
  - .gitignore
  - README.md

# === METADATA ===
tags:
  - nx
  - monorepo
  - workspace
  - initialization
  - setup
effort: small
risk: low
---

# Task T01: Initialize Nx Workspace with Base Configuration

## Overview

Initialize a new Nx workspace with TypeScript and NestJS presets, configure the base workspace settings, and establish the foundational directory structure for the JTS monorepo.

## Acceptance Criteria

- [x] Nx 17.2.8 workspace created with proper presets
- [x] Base [[[`nx.json`](../../../../nx.json)](../../../../nx.json)](../../../../nx.json) configured with task runner options
- [x] Root [[[`package.json`](../../../../package.json)](../../../../package.json)](../../../../package.json) with all core dependencies
- [x] Directory structure created (`apps/`, `libs/`, `tools/`, `configs/`)
- [x] Basic `.gitignore` and documentation files
- [x] Workspace validates with `nx list` and `nx graph`

## Related Specs

**Blocks:**
- [E01-F03-T02](../E01-F03-T02/spec.md)
- [E01-F03-T03](../E01-F03-T03/spec.md)
- [E01-F03-T04](../E01-F03-T04/spec.md)
- [E01-F03-T05](../E01-F03-T05/spec.md)
- [E01-F03-T06](../E01-F03-T06/spec.md)

## Technical Details

### 1. Initialize Nx Workspace

```bash
npx create-nx-workspace@17.2.8 jts \
  --preset=apps \
  --packageManager=npm \
  --nxCloud=false \
  --workspaceType=integrated
```

### 2. Core Dependencies Installation

```json
{
  "dependencies": {
    "@nestjs/common": "^10.3.0",
    "@nestjs/core": "^10.3.0",
    "@nestjs/platform-express": "^10.3.0",
    "rxjs": "^7.8.0",
    "reflect-metadata": "^0.1.13"
  },
  "devDependencies": {
    "@nx/eslint": "17.2.8",
    "@nx/jest": "17.2.8",
    "@nx/js": "17.2.8",
    "@nx/nest": "17.2.8",
    "@nx/node": "17.2.8",
    "@nx/workspace": "17.2.8",
    "nx": "17.2.8",
    "typescript": "^5.3.0"
  }
}
```

### 3. Base nx.json Configuration

```json
{
  "$schema": "./node_modules/nx/schemas/nx-schema.json",
  "version": 3,
  "tasksRunnerOptions": {
    "default": {
      "runner": "nx/tasks-runners/default",
      "options": {
        "cacheableOperations": ["build", "lint", "test", "e2e"],
        "parallel": 4,
        "maxParallel": 6
      }
    }
  }
}
```

### 4. Directory Structure

```
jts/
├── apps/           # Microservices and applications
├── libs/           # Shared libraries
├── tools/          # Build tools and scripts
│   ├── generators/ # Custom Nx generators
│   ├── executors/  # Custom Nx executors
│   └── scripts/    # Utility scripts
├── configs/        # Configuration files
├── docs/           # Documentation
├── nx.json         # Nx configuration
├── package.json    # Root package.json
├── tsconfig.base.json # Base TypeScript config
└── .gitignore      # Git ignore rules
```

## Implementation Steps

1. **Create workspace** (30 min)
   - Run Nx workspace creation command
   - Select appropriate options for integrated monorepo
   - Verify installation success

2. **Configure base settings** (45 min)
   - Update nx.json with optimized settings
   - Configure task runner options
   - Set up caching configuration

3. **Install core dependencies** (30 min)
   - Add NestJS and related packages
   - Install Nx plugins for NestJS
   - Verify dependency tree

4. **Create directory structure** (15 min)
   - Create required directories
   - Add placeholder README files
   - Set up .gitkeep files

## Testing

```bash
# Verify Nx installation
nx --version

# List available plugins
nx list

# View dependency graph
nx graph

# Run format check
nx format:check

# Ensure clean workspace
nx reset
```

## Success Metrics

- Workspace initializes without errors
- All Nx commands run successfully
- Dependency graph shows no issues
- Base configuration supports parallel execution

## Notes

- This is the foundational task that all others depend on
- Focus on getting the base structure right
- Don't add application-specific configuration yet
- Ensure cross-platform compatibility from the start
